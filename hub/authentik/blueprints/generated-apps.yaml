version: 1
entries:
  - model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: "Provider for Traefik"
    attrs:
      internal_host_ssl_validation: true
      mode: forward_single
      external_host: https://traefik.jianling.org
      intercept_header_auth: true
      authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]
      invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]

  - model: authentik_core.application
    identifiers:
      slug: traefik
    attrs:
      name: Traefik
      policy_engine_mode: any
      provider: !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Traefik"]]

  - model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: "Provider for Netdata"
    attrs:
      internal_host_ssl_validation: true
      mode: forward_single
      external_host: https://netdata.jianling.org
      intercept_header_auth: true
      authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]
      invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]

  - model: authentik_core.application
    identifiers:
      slug: netdata
    attrs:
      name: Netdata
      policy_engine_mode: any
      provider: !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Netdata"]]

  - model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: "Provider for Whoami"
    attrs:
      internal_host_ssl_validation: true
      mode: forward_single
      external_host: https://whoami.jianling.org
      intercept_header_auth: true
      authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]
      invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]

  - model: authentik_core.application
    identifiers:
      slug: whoami
    attrs:
      name: Whoami
      policy_engine_mode: any
      provider: !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Whoami"]]

  - model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: "Provider for Paperless"
    attrs:
      internal_host_ssl_validation: true
      mode: forward_single
      external_host: https://paperless.jianling.org
      intercept_header_auth: true
      authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]
      invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]

  - model: authentik_core.application
    identifiers:
      slug: paperless
    attrs:
      name: Paperless
      policy_engine_mode: any
      provider: !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Paperless"]]

  - model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: "Provider for Nextcloud"
    attrs:
      internal_host_ssl_validation: true
      mode: forward_single
      external_host: https://nextcloud.jianling.org
      intercept_header_auth: true
      authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]
      invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]

  - model: authentik_core.application
    identifiers:
      slug: nextcloud
    attrs:
      name: Nextcloud
      policy_engine_mode: any
      provider: !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Nextcloud"]]

  - model: authentik_providers_proxy.proxyprovider
    identifiers:
      name: "Provider for Gatus"
    attrs:
      internal_host_ssl_validation: true
      mode: forward_single
      external_host: https://gatus.jianling.org
      intercept_header_auth: true
      authorization_flow: !Find [authentik_flows.flow, [slug, default-provider-authorization-implicit-consent]]
      invalidation_flow: !Find [authentik_flows.flow, [slug, default-provider-invalidation-flow]]

  - model: authentik_core.application
    identifiers:
      slug: gatus
    attrs:
      name: Gatus
      policy_engine_mode: any
      provider: !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Gatus"]]

  - model: authentik_outposts.outpost
    identifiers:
      name: "authentik Embedded Outpost"
    attrs:
      providers:
        - !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Traefik"]]
        - !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Netdata"]]
        - !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Whoami"]]
        - !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Paperless"]]
        - !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Nextcloud"]]
        - !Find [authentik_providers_proxy.proxyprovider, [name, "Provider for Gatus"]]